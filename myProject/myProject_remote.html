<html>
	<title>My Project (Remote)</title>
	<head>
	<script src="https://cdn.jsdelivr.net/gh/tuftsceeo/SPIKE-Web-Interface/cdn/ServiceDock.js" charset="utf-8"></script>
	<script src="../src/secret.js" charset="utf-8"></script>
	<script src="../src/cloud.js" charset="utf-8"></script>
	<link rel="stylesheet" href="../src/style.css" />
      <script type="text/javascript" src="draw.js"></script>
	<script type="text/javascript">
		// some defaults
		var canvas;
		var ctx;
		
		// drawing based on the following tutorial:
		// https://levelup.gitconnected.com/html5-canvas-drawing-application-on-github-pages-beginner-friendly-tutorial-5d50b99adb6a 
		window.addEventListener("load", () => {
			// pointer to canvas
			canvas = document.getElementById('draw_area');
			// context
			ctx = canvas.getContext('2d');
			resize();
            
            const blackButton = document.getElementById('blackColor');
            const whiteButton = document.getElementById('whiteColor');
            const redButton = document.getElementById('redColor');
            const orangeButton = document.getElementById('orangeColor');
            const yellowButton = document.getElementById('yellowColor');
            const greenButton = document.getElementById('greenColor');
            const blueButton = document.getElementById('blueColor');
            const purpleButton = document.getElementById('purpleColor');
            const clearButton = document.getElementById('clear');

			// internal functions
			let painting = false;
		
			function startPosition(e) {
				painting = true;
				draw(e);
			}
			function finishedPosition() {
				painting = false;
				ctx.beginPath();
			}
			function draw(e) {
				if (!painting) { return; }
				ctx.lineWidth = 3;
				ctx.lineCap = 'round';
				ctx.lineTo(e.clientX, e.clientY);
				ctx.stroke();
				ctx.beginPath();
				ctx.moveTo(e.clientX, e.clientY);
			}

			// event listeners
			canvas.addEventListener("mousedown", startPosition);
			canvas.addEventListener("mouseup", finishedPosition);
			canvas.addEventListener("mousemove", draw);

            //buttons
            blackButton.addEventListener('click', () => ctx.strokeStyle = "#000000");
            whiteButton.addEventListener('click', () => ctx.strokeStyle = "#ffffff");
            redButton.addEventListener('click', () => ctx.strokeStyle = "#ff0000");
            orangeButton.addEventListener('click', () => ctx.strokeStyle = "orange");
            yellowButton.addEventListener('click', () => ctx.strokeStyle = "yellow");
            greenButton.addEventListener('click', () => ctx.strokeStyle = "green");
            blueButton.addEventListener('click', () => ctx.strokeStyle = "blue");
            purpleButton.addEventListener('click', () => ctx.strokeStyle = "purple");
            clearButton.addEventListener('click', () => clearCanvas());
        });
		// resize fix (for mouse x and y fix) from:
		// https://stackoverflow.com/a/30684711 
		window.addEventListener('resize', resize);
		// resize canvas
		function resize() {
			ctx.canvas.width = 600;
			ctx.canvas.height = 600;
		}

        function clearCanvas(){
            ctx.clearRect(0,0, 600, 600);
        }

	</script>
     

    <style>
        body{
              background-color: lightblue;
              margin: 0 0 0 0;
        }

        #draw_area {
			border: 1px solid black;
            float: left;
            width : 600px;
            height: 600px;
            background-color: white;
            display: block;
            margin: 30px
		}

        #clear{
            display: inline-block;
	        width: 120px;
        	height: 30px;
        	margin: auto;
        	border: 1px solid black;
        	font-size: 20px;
        	color: black;
        	background-color: white;
            border-radius: 20px;
        }

        .colorControls{
            display: inline-grid;
            border: none;
            margin: 30px
        }

        .motorControls{
            display: inline-grid;
            border: none;
            margin: 30px;
        }

        #blackColor {
	        display: inline-block;
	        width: 30px;
	        height: 30px;
	        margin: auto;
        	border: 1px solid black;
	        font-size: 20px;
	        color: white;
	        background-color: black;
            border-radius: 50%;
        }

        #whiteColor {
	        display: inline-block;
	        width: 30px;
        	height: 30px;
        	margin: auto;
        	border: 1px solid black;
        	font-size: 20px;
        	color: black;
        	background-color: white;
            border-radius: 50%;
        }

        #redColor {
	        display: inline-block;
	        width: 30px;
        	height: 30px;
        	margin: auto;
        	border: 1px solid black;
        	font-size: 20px;
        	color: white;
        	background-color: red;
            border-radius: 50%;
        }

        #orangeColor {
	        display: inline-block;
	        width: 30px;
        	height: 30px;
        	margin: auto;
        	border: 1px solid black;
        	font-size: 20px;
        	color: white;
        	background-color: orange;
            border-radius: 50%;
        }

        #blueColor {
	        display: inline-block;
	        width: 30px;
        	height: 30px;
        	margin: auto;
        	border: 1px solid black;
        	font-size: 20px;
        	color: white;
        	background-color: blue;
            border-radius: 50%;
        }

        #yellowColor {
	        display: inline-block;
	        width: 30px;
        	height: 30px;
        	margin: auto;
        	border: 1px solid black;
        	font-size: 20px;
        	color: white;
        	background-color: yellow;
            border-radius: 50%;
        }

        #purpleColor {
	        display: inline-block;
	        width: 30px;
        	height: 30px;
        	margin: auto;
        	border: 1px solid black;
        	font-size: 20px;
        	color: white;
        	background-color: purple;
            border-radius: 50%;
        }
        
        #greenColor {
	        display: inline-block;
	        width: 30px;
        	height: 30px;
        	margin: auto;
        	border: 1px solid black;
        	font-size: 20px;
        	color: white;
        	background-color: green;
            border-radius: 50%;
        }

        h1{
            text-align:center;
        }

        h2{
            text-align: center;
            background-color: #0c2454;
            color: white;
        }

        h3{
            text-align: center;
            font-size: 20px;
            color: black;
        }

        .h3left{
            background-color: orange; 
        }

        .h3right{
            background-color: yellow;
        }

        .h3rotating{
            background-color: red;
        }


        #colorLabel{
            margin:30px;
            text-align: center;
        }

        .run{
            display: inline-grid;
            border: none;
            margin: 30px;
        }

        #run{
            display: inline-block;
	        width: 120px;
        	height: 60px;
        	margin: auto;
        	border: 1px solid black;
        	font-size: 40px;
        	color: white;
        	background-color: green;
            border-radius: 20px;
        }
       
        #stop{
            display: inline-block;
	        width: 120px;
        	height: 60px;
        	margin: auto;
        	border: 1px solid black;
        	font-size: 40px;
        	color: white;
        	background-color: red;
            border-radius: 20px;
        }

        #print{
            display: inline-block;
	        width: 120px;
        	height: 30px;
        	margin: auto;
        	border: 1px solid black;
        	font-size: 20px;
        	color: black;
        	background-color: white;
            border-radius: 20px;
        }

        
    </style>
	</head>
<body>

	<!-- SERVICE DOCK -->
	<div id="servicedock">
		<service-airtable id="service_airtable" tablename="LeggoDraw"></service-airtable>
	</div>

<hr>
  <h1>Leggo Draw (Remote Interface)</h1>

<div class ="motorControls">
    <h2> MOTOR CONTROLS</h2>
    <h3 class="h3left"> LEFT MOTOR SPEED: </h3>
  <input type=range cloud_action='update' cloud_name='MotorA_speed' cloud_min="-50" cloud_max="50" min='-50' max='50' value='0' />

  <h3 class="h3right"> RIGHT MOTOR SPEED: </h3>
  <input type=range cloud_action='update' cloud_name='MotorB_speed' cloud_min="-50" cloud_max="50" min='-50' max='50' value='0' />

  <h3 class="h3rotating"> ROTATING MOTOR SPEED: </h3>
  <input type=range cloud_action='update' cloud_name='MotorC_speed' cloud_min="-50" cloud_max="50" min='-50' max='50' value='0' />

  <img src="./img/legg-draw_diagram.jpg" width="auto" height="250">
</div>
  
<div class ="colorControls">
    <h2> COLOR</h2>
    <button id="blackColor"></button> <br>
    <button id="whiteColor"></button> <br>
    <button id="redColor"></button> <br>
    <button id="orangeColor"> </button> <br>
    <button id="yellowColor"> </button> <br>
    <button id="greenColor"> </button> <br>
    <button id="blueColor"> </button> <br>
    <button id="purpleColor"> </button> <br>
    <!--<button id='clear'>Clear </button>-->
</div>

<div class="run">
      <p><button id="run" cloud_action='update' cloud_name='command'>RUN</button></p>
      <p><button id="stop" cloud_action='update' cloud_name='command'>STOP</button></p>
      <button id="print"> Print </button>
      <button id="clear"> Clear </button>
</div>

<canvas id="draw_area"></canvas>



</body>
</html>
